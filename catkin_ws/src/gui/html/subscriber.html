<!DOCTYPE html>
<html>
<style>
    table, th, td {
        border: 1px solid black;
               }
</style>    
<meta charset="utf-8" />
<script type="text/javascript" src="../js/eventemitter2.min.js"></script>
<script type="text/javascript" src="../js/roslib.min.js"></script>

<script type="text/javascript" type="text/javascript">
    // Connecting to ROS
    // -----------------

    var ros = new ROSLIB.Ros({
        url: 'ws://localhost:9090'
    });

    ros.on('connection', function () {
        console.log('Connected to websocket server.');
    });

    ros.on('error', function (error) {
        console.log('Error connecting to websocket server: ', error);
    });

    ros.on('close', function () {
        console.log('Connection to websocket server closed.');
    });
    const tableSize = 5;
    const tableID = "nameValueTable";

    
    var topic_se_depth = new ROSLIB.Topic({
        ros: ros,
        name: '/state_estimation/depth',
        messageType: 'std_msgs/Float64'
    });

    topic_se_depth.subscribe(function (message) {
        console.log('Received message on ' + message.name + ': ' + message.data);
        addTopicToTable(message.name, message.data, tableID, 0)
        topic_se_depth.unsubscribe();
    });

    function addTopicToTable(name, value, tableID, index){
        var table = document.getElementById("nameValueTable");
        var row = table.insertRow(index);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        cell1.innerHTML = name;
        cell2.innerHTML = value;
    }


</script>
</head>

<body>
    <h1>Simple roslib Example</h1>
    <p>Check your Web Console for output.</p>
    <table style="width:100%" id="nameValueTable">
        
    </table>
    <p>Depth: </p>
    <p id="depth"></p>
</body>

</html>